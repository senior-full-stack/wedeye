<div class="dashboard-content">
  <div class="search-user">
    <h2 class="align-center">Start searching for users by name or email or type, etc</h2>
    <div class="input-group col-md-6 offset-md-3">
      <input class="form-control" type="text" name="search" [(ngModel)]="searchText" (keydown)="searchEvent($event)"
        (focusout)="search(-1,-1)" autocomplete="off"
        placeholder="&#61442;  enter keywords">
      <div class="input-group-append">
        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">Filters</button>
        <div class="dropdown-menu">
          <a class="dropdown-item" [ngClass]="status==0?'active':'normal'" (click)="search(-1, 0)">All</a>
          <a class="dropdown-item" [ngClass]="status==1?'active':'normal'" (click)="search(-1, 1)">Active</a>
          <a class="dropdown-item" [ngClass]="status==2?'active':'normal'" (click)="search(-1, 2)">Inactive</a>
          <a class="dropdown-item" [ngClass]="status==3?'active':'normal'" (click)="search(-1, 3)">Suspended</a>
          <a class="dropdown-item" [ngClass]="status==4?'active':'normal'" (click)="search(-1, 4)">On Hold</a>
          <a class="dropdown-item" [ngClass]="status==5?'active':'normal'" (click)="search(-1, 5)">Payment Done</a>
          <a class="dropdown-item" [ngClass]="status==6?'active':'normal'" (click)="search(-1, 6)">Featured Account</a>
          <div role="separator" class="dropdown-divider"></div>
          <a class="dropdown-item" [ngClass]="status==7?'active':'normal'" (click)="search(-1, 7)">Users created in last 30 days</a>
        </div>
      </div>
    </div>
  </div>
  <h1>View / Edit / Delete the Users</h1>
  <div class="add-user align-right">
    <button class="btn" (click)="openAddUserDlg()"><i class="fa fa-user-plus"></i> Add User</button>
  </div>
  <div class="table-responsive">
    <table class="table table-striped table-hover table-borderless">
      <thead>
      <tr>
        <th>No</th>
        <th>Profile</th>
        <th>Name</th>
        <th>Email</th>
        <th>Password</th>
        <th>Type</th>
        <th>Relation</th>
        <th>Phone</th>
        <th>Address</th>
        <th>Wedding-Date</th>
        <th>Created-Date</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let user of users ; let i = index">
        <td>{{i + (currentPage-1)*8 + 1}}</td>
        <td>
          <img *ngIf="user.profileUrl" class="user-image" [src]="baseUrl + '/' + confirmUrl(user.profileUrl)">
          <i *ngIf="!user.profileUrl" class="fa fa-user-circle user-image-default"></i>
        </td>
        <td>{{user.name}}</td>
        <td>{{user.email}}</td>
        <td><div class="text-ellipsis">{{user.password}}</div></td>
        <td>{{user.type}}</td>
        <td>{{user.relation}}</td>
        <td>{{user.phone}}</td>
        <td><div class="text-ellipsis">{{user.address}}</div></td>
        <td class="text-date">{{confirmDate(user.weddingDate)}}</td>
        <td class="text-date">{{confirmDate(user.createdDate)}}</td>
        <td>
          <select *ngIf="user.type!=='admin'" [(ngModel)]="user.status" (change)="changeStatus(user)">
            <option value="1">Active</option>
            <option value="2">Inactive</option>
            <option value="3">Suspended</option>
            <option value="4">On Hold</option>
            <option value="5">Payment Done</option>
            <option value="6">Featured Account</option>
          </select>
        </td>
        <td class="td-action">
          <a class="table-action" (click)="openEditUserDlg(i)"><i class="fa fa-edit"></i></a>
          <!--<a class="table-action" (click)="openConfirmDlg(i)"><i class="fa fa-trash-o"></i></a>-->
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <div class="table-pagination align-center">
    <div *ngIf="pager && pager.pages && pager.pages.length" class="btn-group flex-wrap" role="group" aria-label="...">
      <button [ngClass]="{disabled:pager.currentPage === 1}"  
        class="btn btn-info btn-pagination-first" (click)="search(1, -1)">First</button>
      <button [ngClass]="{disabled:pager.currentPage === 1}" (click)="prevPage()" 
        class="btn btn-info btn-pagination-previous">Previous</button>
      <button *ngFor="let page of pager.pages" [ngClass]="{active:currentPage === page}" (click)="search(page, -1)" 
        class="btn btn-info page-item number-item btn-pagination-page">{{page}}</button>
      <button [ngClass]="{disabled:pager.currentPage === pager.totalPages}" (click)="nextPage()"
        class="btn btn-info btn-pagination-previous">Next</button>
      <button [ngClass]="{disabled:pager.currentPage === pager.totalPages}" (click)="search(pager.totalPages, -1)" 
        class="btn btn-info btn-pagination-first">Last</button>
    </div>
  </div>
</div>
